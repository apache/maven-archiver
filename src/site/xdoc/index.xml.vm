<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<document>
  <properties>
    <title>Reference</title>
    <author email="olamy@apache.org">Olivier Lamy</author>
    <author email="dennisl@apache.org">Dennis Lundberg</author>
  </properties>
  <body>
    <section name="${project.name}">
      <p>
        The Maven Archiver is mainly used by plugins to handle packaging. The
        version numbers referenced in the Since column on this page are the
        version of the Maven Archiver component - not for any specific plugin.
        To see which version of Maven Archiver a plugin uses, go to the site
        for that plugin.
      </p>

      <source>
&lt;<a href="#class_archive">archive</a>&gt;
  &lt;addMavenDescriptor/&gt;
  &lt;compress/&gt;
  &lt;forced/&gt;
  &lt;index/&gt;
  &lt;pomPropertiesFile/&gt;

  &lt;manifestFile/&gt;
  &lt;<a href="#class_manifest">manifest</a>&gt;
    &lt;addClasspath/&gt;
    &lt;addDefaultEntries/&gt;
    &lt;addDefaultImplementationEntries/&gt;
    &lt;addDefaultSpecificationEntries/&gt;
    &lt;addBuildEnvironmentEntries/&gt;
    &lt;addExtensions/&gt;
    &lt;classpathLayoutType/&gt;
    &lt;classpathPrefix/&gt;
    &lt;customClasspathLayout/&gt;
    &lt;mainClass/&gt;
    &lt;packageName/&gt;
    &lt;useUniqueVersions/&gt;
  &lt;/manifest&gt;
  &lt;manifestEntries&gt;
    &lt;key&gt;value&lt;/key&gt;
  &lt;/manifestEntries&gt;
  &lt;manifestSections&gt;
    &lt;<a href="#class_manifestSection">manifestSection</a>&gt;
      &lt;name/&gt;
      &lt;manifestEntries&gt;
        &lt;key&gt;value&lt;/key&gt;
      &lt;/manifestEntries&gt;
    &lt;manifestSection/&gt;
  &lt;/manifestSections&gt;
&lt;/archive&gt;
      </source>

      <a name="class_archive"/>
      <subsection name="archive">
        <p>The <code>&lt;archive&gt;</code> element is the root of the archiver configuration.
        The following table lists all of the possible child elements.</p>
        <table>
          <tr>
            <th>Element</th>
            <th>Type</th>
            <th>Since</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>addMavenDescriptor</code></td>
            <td><code>boolean</code></td>
            <td></td>
            <td>
              Whether the created archive will contain these two Maven files:
              <ul>
                <li>
                  The <code>pom.xml</code> file, located in the archive in
                  <code>META-INF/maven/${groupId}/${artifactId}/pom.xml</code>
                </li>
                <li>
                  A <code><a href="#pom-properties-content">pom.properties</a></code> file,
                  located in the archive in <code>META-INF/maven/${groupId}/${artifactId}/pom.properties</code>
                </li>
              </ul>
              The default value is <code>true</code>.
            </td>
          </tr>
          <tr>
            <td><code>compress</code></td>
            <td><code>boolean</code></td>
            <td></td>
            <td>
              Activate compression for the archive.
              The default value is <code>true</code>.
            </td>
          </tr>
          <tr>
            <td><code>forced</code></td>
            <td><code>boolean</code></td>
            <td>2.2</td>
            <td>
              Whether recreating the archive is forced (default) or not. Setting
              this option to <code>false</code>, means that the archiver should compare the
              timestamps of included files with the timestamp of the target archive
              and rebuild the archive, only if the latter timestamp precedes the
              former timestamps. Checking for timestamps will typically offer a
              performance gain (in particular, if the following steps in a build
              can be suppressed, if an archive isn't recreated) on the cost that
              you get inaccurate results from time to time. In particular, removal
              of source files won't be detected.
              <p>
                An archiver doesn't necessarily support checks for uptodate. If
                so, setting this option to <code>true</code> will simply be ignored.
              </p>
              The default value is <code>true</code>.
            </td>
          </tr>
          <tr>
            <td><code>index</code></td>
            <td><code>boolean</code></td>
            <td></td>
            <td>
              <strong>Deprecated:</strong> See <a href="https://bugs.openjdk.org/browse/JDK-8305597">JDK-8305597</a>
              <p>
                Whether the created archive will contain an
                <code>INDEX.LIST</code> file.
              </p>
              <p>
                The default value is <code>false</code>.
              </p>
            </td>
          </tr>
          <tr>
            <td><code>pomPropertiesFile</code></td>
            <td><code>File</code></td>
            <td>2.3</td>
            <td>
              Use this to override the auto created
              <a href="#pom-properties-content">pom.properties</a> file
              (only if <code>addMavenDescriptor</code> is set to <code>true</code>)
            </td>
          </tr>
          <tr>
            <td><code>manifestFile</code></td>
            <td><code>File</code></td>
            <td></td>
            <td>With this you can supply your own manifest file.</td>
          </tr>
          <tr>
            <td><code><a href="#class_manifest">manifest</a></code></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td><code>manifestEntries</code></td>
            <td><code>Map</code></td>
            <td></td>
            <td>A list of key/value pairs to add to the manifest.</td>
          </tr>
          <tr>
            <td><code><a href="#class_manifestSection">manifestSections</a></code></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </table>
      </subsection>

      <a name="pom-properties-content"/>
      <subsection name="pom.properties content">
        <p>
          The auto created <code>META-INF/maven/${groupId}/${artifactId}/pom.properties</code> file will contain the
          following content:
        </p>
        <source>
artifactId=\${project.artifactId}
groupId=\${project.groupId}
version=\${project.version}</source>
      </subsection>

      <a name="class_manifest"/>
      <subsection name="manifest">
        <p>The <code>&lt;manifest&gt;</code> element configures main section of <code>META-INF/MANIFEST.MF</code>.
        The following table lists all of the possible child elements.</p>
        <table>
          <tr>
            <th>Element</th>
            <th>Type</th>
            <th>Since</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>addClasspath</code></td>
            <td><code>boolean</code></td>
            <td></td>
            <td>
              Whether to create a <code>Class-Path</code> manifest entry.
              The default value is <code>false</code>.
            </td>
          </tr>
          <tr>
            <td><code>addDefaultEntries</code></td>
            <td><code>boolean</code></td>
            <td>3.4.0</td>
            <td>
              If the manifest will contain these entries:
              <source>
Created-By: Maven Archiver ${project.version}
Build-Jdk-Spec: ${java.specification.version}
Java-Version: &#36;{project maven.compiler.release/target}</source>
              Since 3.5.0, the default value of <code>Created-By</code> entry can be overridden (usually by plugin code) using
              <a href="./apidocs/org/apache/maven/archiver/MavenArchiver.html">MavenArchiver.setCreatedBy(...)</a> API.<br />
              Since 3.6.5, <code>Java-Version</code> entry is discovered by
              <a href="./apidocs/org/apache/maven/archiver/BuildHelper.html">BuildHelper.discoverJavaRelease(...)</a> API.<br />
              The default value is <code>true</code>.
            </td>
          </tr>
          <tr>
            <td><code>addDefaultImplementationEntries</code></td>
            <td><code>boolean</code></td>
            <td>2.1 and 2.6</td>
            <td>
              If the manifest will contain these entries:
              <source>
Implementation-Title: \${project.name}
Implementation-Version: \${project.version}
Implementation-Vendor: \${project.organization.name}</source>
              The default value is <code>false</code>.
            </td>
          </tr>
          <tr>
            <td><code>addDefaultSpecificationEntries</code></td>
            <td><code>boolean</code></td>
            <td>2.1</td>
            <td>
              If the manifest will contain these entries:
              <source>
Specification-Title: \${project.name}
Specification-Version: \${project.artifact.selectedVersion.majorVersion}.\${project.artifact.selectedVersion.minorVersion}
Specification-Vendor: \${project.organization.name}</source>
              The default value is <code>false</code>.
            </td>
          </tr>
          <tr>
            <td><code>addBuildEnvironmentEntries</code></td>
            <td><code>boolean</code></td>
            <td>3.4.0</td>
            <td>
              If the manifest will contain these entries:
              <source>
Build-Tool: ${maven.build.version}
Build-Jdk: ${java.version} (${java.vendor})
Build-Os:  ${os.name} (${os.version}; (${os.arch})</source>
              The default value is <code>false</code>.
            </td>
          </tr>
          <tr>
            <td><code>addExtensions</code></td>
            <td><code>boolean</code></td>
            <td></td>
            <td>
              Whether to create an <code>Extension-List</code> manifest
              entry.
              The default value is <code>false</code>.
            </td>
          </tr>
          <tr>
            <td><code>classpathLayoutType</code></td>
            <td><code>String</code></td>
            <td>2.4</td>
            <td>
              The type of layout to use when formatting entries in the created
              <code>Class-Path</code>. Valid values are: <code>simple</code>,
              <code>repository</code> (the same as a Maven classpath layout) and
              <code>custom</code>.
              <br/>
              <b>Note:</b> If you specify a type of <code>custom</code> you
              <b>must</b> also set <code>customClasspathLayout</code>.
              The default value is <code>simple</code>.
            </td>
          </tr>
          <tr>
            <td><code>classpathPrefix</code></td>
            <td><code>String</code></td>
            <td></td>
            <td>
              A text that will be prefixed to all your <code>Class-Path</code>
              entries.
              The default value is <code>&quot;&quot;</code>.
            </td>
          </tr>
          <tr>
            <td><code>customClasspathLayout</code></td>
            <td><code>String</code></td>
            <td>2.4</td>
            <td>
              The layout expression to use when the layout type set in
              <code>classpathLayoutType</code> has the value <code>custom</code>.
              Expressions will be evaluated against the following ordered list
              of classpath-related objects:
              <ol>
                <li>The current Artifact instance, if one exists.</li>
                <li>The current ArtifactHandler instance from the artifact above.</li>
              </ol>
              <b>Note:</b> If you specify a layout type of <code>custom</code>
              you <b>must</b> set this layout expression.
            </td>
          </tr>
          <tr>
            <td><code>mainClass</code></td>
            <td><code>String</code></td>
            <td></td>
            <td>The <code>Main-Class</code> manifest entry.</td>
          </tr>
          <tr>
            <td><code>packageName</code></td>
            <td><code>String</code></td>
            <td></td>
            <td>Package manifest entry.</td>
          </tr>
          <tr>
            <td><code>useUniqueVersions</code></td>
            <td><code>boolean</code></td>
            <td>2.4</td>
            <td>
              Whether to use unique timestamp Snapshot versions rather than -SNAPSHOT versions.
              The default value is <code>true</code>.
            </td>
          </tr>
        </table>
      </subsection>

      <a name="class_manifestSection"/>
      <subsection name="manifestSection">
        <p>The <code>&lt;manifestSection&gt;</code> element configures sections of <code>META-INF/MANIFEST.MF</code>.
        The following table lists all of the possible child elements.</p>
        <table>
          <tr>
            <th>Element</th>
            <th>Type</th>
            <th>Since</th>
            <th>Description</th>
          </tr>
          <tr>
            <td><code>name</code></td>
            <td><code>String</code></td>
            <td></td>
            <td>
              The name of the section.
            </td>
          </tr>
          <tr>
            <td><code>manifestEntries</code></td>
            <td><code>Map</code></td>
            <td></td>
            <td>A list of key/value pairs to add to the manifest.</td>
          </tr>
        </table>
      </subsection>
    </section>
  </body>
</document>
